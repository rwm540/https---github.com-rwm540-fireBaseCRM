# راهنمای کامل اجرای پروژه CRM

این پروژه شامل دو بخش اصلی است: یک **فرانت‌اند** ساخته شده با React و Vite، و یک **بک‌اند** ساخته شده با Node.js, Express و Knex برای اتصال به پایگاه داده SQL Server.

برای اجرای کامل پروژه، باید هر دو بخش را به صورت جداگانه راه‌اندازی کنید.

## پیش‌نیازها

قبل از شروع، مطمئن شوید که نرم‌افزارهای زیر روی سیستم شما نصب شده‌اند:

1.  **Node.js**: برای اجرای جاوااسکریپت در سمت سرور (می‌توانید از [nodejs.org](https://nodejs.org/) دانلود کنید).
2.  **SQL Server**: پایگاه داده‌ای که برای ذخیره اطلاعات استفاده می‌شود.
3.  **یک ترمینال یا Command Prompt**: برای اجرای دستورات.

---

## مرحله ۱: نصب پکیج‌ها

ابتدا، تمام پکیج‌های مورد نیاز پروژه را نصب کنید. یک ترمینال در پوشه اصلی پروژه باز کرده و دستور زیر را اجرا کنید:

```bash
npm install
```

این دستور تمام وابستگی‌های تعریف شده در `package.json` را برای هر دو بخش فرانت‌اند و بک‌اند نصب می‌کند.

---

## مرحله ۲: راه‌اندازی پایگاه داده (اجرای مایگریشن)

حالا باید جداول پایگاه داده را با استفاده از مایگریشن Knex ایجاد کنیم.

1.  **بررسی اتصال**: فایل `knexfile.js` را باز کرده و مطمئن شوید که اطلاعات اتصال به پایگاه داده SQL Server شما (نام سرور، نام کاربری، رمز عبور و نام دیتابیس) صحیح است.

2.  **اجرای مایگریشن**: در همان ترمینال، دستور زیر را برای ساختن جداول در دیتابیس `crmbackend` اجرا کنید:

    ```bash
    npx knex migrate:latest
    ```

    اگر این دستور با موفقیت اجرا شود، تمام جداول مورد نیاز پروژه در پایگاه داده شما ساخته خواهند شد.

---

## مرحله ۳: راه‌اندازی سرور بک‌اند (Node.js)

سرور بک‌اند مسئول ارتباط با پایگاه داده و ارائه API به فرانت‌اند است.

1.  در همان ترمینال، دستور زیر را برای روشن کردن سرور Node.js اجرا کنید:

    ```bash
    node server.js
    ```

2.  پس از اجرای دستور، باید پیام `Server is listening on *:3001` و `SQL Server connected successfully.` را مشاهده کنید. این به معنی آن است که بک‌اند شما آماده دریافت درخواست است.

**مهم:** این ترمینال را باز نگه دارید. تا زمانی که سرور بک‌اند در حال اجراست، نباید آن را ببندید.

---

## مرحله ۴: راه‌اندازی فرانت‌اند (React)

حالا که بک‌اند در حال اجراست، می‌توانید رابط کاربری را راه‌اندازی کنید.

1.  یک **ترمینال جدید** باز کنید (ترمینال قبلی باید برای سرور بک‌اند باز بماند).

2.  در این ترمینال جدید، دستور زیر را برای راه‌اندازی سرور توسعه Vite اجرا کنید:

    ```bash
    npm run dev
    ```

3.  این دستور اپلیکیشن React را اجرا کرده و آدرسی مانند `http://localhost:9002` را در ترمینال به شما نمایش می‌دهد.

---

## مرحله ۵: مشاهده اپلیکیشن

آدرسی که در مرحله قبل توسط Vite به شما داده شد (معمولاً `http://localhost:9002`) را در مرورگر خود باز کنید. حالا باید اپلیکیشن CRM را به صورت کامل و متصل به پایگاه داده مشاهده کنید.

موفق باشید!
